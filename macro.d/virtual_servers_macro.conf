#----------------------------------------------------------------#
#
# ███╗   ██╗███████╗██╗    ██╗    ██╗    ██╗ █████╗ ██╗   ██╗
# ████╗  ██║██╔════╝██║    ██║    ██║    ██║██╔══██╗╚██╗ ██╔╝
# ██╔██╗ ██║█████╗  ██║ █╗ ██║    ██║ █╗ ██║███████║ ╚████╔╝
# ██║╚██╗██║██╔══╝  ██║███╗██║    ██║███╗██║██╔══██║  ╚██╔╝
# ██║ ╚████║███████╗╚███╔███╔╝    ╚███╔███╔╝██║  ██║   ██║
# ╚═╝  ╚═══╝╚══════╝ ╚══╝╚══╝      ╚══╝╚══╝ ╚═╝  ╚═╝   ╚═╝
#
#----------------------------------------------------------------#


<Macro MACRO_DEFAULT ${MACRO_VH_URL_FQDN} ${MACRO_VH_URL_SHORT} ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER}>
  <VirtualHost ${EIF_APACHE_CONF_LISTEN}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh.macro
    Use MACRO_VH  ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}" ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER}
    UndefMacro MACRO_VH
  </VirtualHost>
</Macro>

<Macro MACRO_DEFAULT_SSO ${MACRO_VH_URL_FQDN} ${MACRO_VH_URL_SHORT} ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER} ${MACRO_VH_SSO_LOCATION}>
  <VirtualHost ${EIF_APACHE_CONF_LISTEN}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh.macro
    Use MACRO_VH  ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}" ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER}
    UndefMacro MACRO_VH
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_snippet_sso_location.macro
    Use MACRO_SNIPPET_SSO_LOCATION ${MACRO_VH_SSO_LOCATION}
    UndefMacro MACRO_SNIPPET_SSO_LOCATION
  </VirtualHost>
</Macro>

<Macro MACRO_SSL ${MACRO_VH_URL_FQDN} ${MACRO_VH_URL_SHORT} ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER}>
  <VirtualHost ${EIF_APACHE_CONF_LISTEN}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_ssl_redirector.macro
    Use MACRO_VH_SSL_REDIRECTOR ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}"
    UndefMacro MACRO_VH_SSL_REDIRECTOR
  </VirtualHost>
  <VirtualHost ${EIF_APACHE_CONF_LISTENSSL}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_ssl.macro
    Use MACRO_VH_SSL ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}" ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER}
    UndefMacro MACRO_VH_SSL
  </VirtualHost>
</Macro>

<Macro MACRO_SSL_SSO ${MACRO_VH_URL_FQDN} ${MACRO_VH_URL_SHORT} ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER} ${MACRO_VH_SSO_LOCATION}>
  <VirtualHost ${EIF_APACHE_CONF_LISTEN}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_ssl_redirector.macro
    Use MACRO_VH_SSL_REDIRECTOR ${MACRO_VH_URL_FQDN} ${MACRO_VH_URL_SHORT}
    UndefMacro MACRO_VH_SSL_REDIRECTOR
  </VirtualHost>
  <VirtualHost ${EIF_APACHE_CONF_LISTENSSL}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_ssl.macro
    Use MACRO_VH_SSL ${MACRO_VH_URL_FQDN} ${MACRO_VH_URL_SHORT} ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER}
    UndefMacro MACRO_VH_SSL
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_snippet_sso_location.macro
    Use MACRO_SNIPPET_SSO_LOCATION ${MACRO_VH_SSO_LOCATION}
    UndefMacro MACRO_SNIPPET_SSO_LOCATION
  </VirtualHost>
</Macro>

#===============================================================================#
# Special virtual hosts,
# that just redirect or do something silly...
#===============================================================================#

<Macro MACRO_REDIRECT ${MACRO_VH_URL_FQDN} ${MACRO_VH_URL_SHORT} ${MACRO_VH_URL_TARGET}>
  <VirtualHost ${EIF_APACHE_CONF_LISTEN}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_redirector.macro
    Use MACRO_VH_REDIRECTOR ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}" "${MACRO_VH_URL_TARGET}"
    UndefMacro MACRO_VH_REDIRECTOR
  </VirtualHost>
</Macro>

#================================================================================#
# TOMCAT STANDALONE
# Single tomcat backend...
#================================================================================#
<Macro MACRO_TOMCAT_STANDALONE ${MACRO_VH_URL_FQDN} ${MACRO_VH_URL_SHORT} ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER} ${MACRO_VH_PROXY1_HOSTPORT} ${MACRO_VH_PROXY1_NAME}>
  <VirtualHost ${EIF_APACHE_CONF_LISTEN}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh.macro
    Use MACRO_VH  ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}" ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER}
    UndefMacro MACRO_VH
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_snippet_tomcat_standalone.macro
    Use MACRO_SNIPPET_TOMCAT_STANDALONE ${MACRO_VH_PROXY1_HOSTPORT} ${MACRO_VH_PROXY1_NAME}
    UndefMacro MACRO_SNIPPET_TOMCAT_STANDALONE
  </VirtualHost>
</Macro>

# with sso
<Macro MACRO_TOMCAT_STANDALONE_SSO ${MACRO_VH_URL_FQDN} ${MACRO_VH_URL_SHORT} ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER} ${MACRO_VH_PROXY1_HOSTPORT} ${MACRO_VH_PROXY1_NAME} ${MACRO_VH_SSO_LOCATION}>
  <VirtualHost ${EIF_APACHE_CONF_LISTEN}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh.macro
    Use MACRO_VH  ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}" ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER}
    UndefMacro MACRO_VH
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_snippet_sso_location.macro
    Use MACRO_SNIPPET_SSO_LOCATION ${MACRO_VH_SSO_LOCATION}
    UndefMacro MACRO_SNIPPET_SSO_LOCATION
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_snippet_tomcat_standalone.macro
    Use MACRO_SNIPPET_TOMCAT_STANDALONE ${MACRO_VH_PROXY1_HOSTPORT} ${MACRO_VH_PROXY1_NAME}
    UndefMacro MACRO_SNIPPET_TOMCAT_STANDALONE
  </VirtualHost>
</Macro>

# with ssl
<Macro MACRO_TOMCAT_STANDALONE_SSL ${MACRO_VH_URL_FQDN} ${MACRO_VH_URL_SHORT} ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER} ${MACRO_VH_PROXY1_HOSTPORT} ${MACRO_VH_PROXY1_NAME}>
  <VirtualHost ${EIF_APACHE_CONF_LISTEN}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_ssl_redirector.macro
    Use MACRO_VH_SSL_REDIRECTOR ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}"
    UndefMacro MACRO_VH_SSL_REDIRECTOR
  </VirtualHost>
  <VirtualHost ${EIF_APACHE_CONF_LISTENSSL}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_ssl.macro
    Use MACRO_VH_SSL ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}" ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER}
    UndefMacro MACRO_VH_SSL
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_snippet_tomcat_standalone.macro
    Use MACRO_SNIPPET_TOMCAT_STANDALONE ${MACRO_VH_PROXY1_HOSTPORT} ${MACRO_VH_PROXY1_NAME}
    UndefMacro MACRO_SNIPPET_TOMCAT_STANDALONE
  </VirtualHost>
</Macro>

# with ssl and sso
<Macro MACRO_TOMCAT_STANDALONE_SSL_SSO ${MACRO_VH_URL_FQDN} ${MACRO_VH_URL_SHORT} ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER} ${MACRO_VH_PROXY1_HOSTPORT} ${MACRO_VH_PROXY1_NAME} ${MACRO_VH_SSO_LOCATION}>
  <VirtualHost ${EIF_APACHE_CONF_LISTEN}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_ssl_redirector.macro
    Use MACRO_VH_SSL_REDIRECTOR ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}"
    UndefMacro MACRO_VH_SSL_REDIRECTOR
  </VirtualHost>
  <VirtualHost ${EIF_APACHE_CONF_LISTENSSL}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_ssl.macro
    Use MACRO_VH_SSL ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}" ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER}
    UndefMacro MACRO_VH_SSL
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_snippet_sso_location.macro
    Use MACRO_SNIPPET_SSO_LOCATION ${MACRO_VH_SSO_LOCATION}
    UndefMacro MACRO_SNIPPET_SSO_LOCATION
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_snippet_tomcat_standalone.macro
    Use MACRO_SNIPPET_TOMCAT_STANDALONE ${MACRO_VH_PROXY1_HOSTPORT} ${MACRO_VH_PROXY1_NAME}
    UndefMacro MACRO_SNIPPET_TOMCAT_STANDALONE
  </VirtualHost>
</Macro>


#================================================================================#
# TOMCAT CLUSTER
# two tomcat backends...
#================================================================================#
<Macro MACRO_TOMCAT_CLUSTER ${MACRO_VH_URL_FQDN} ${MACRO_VH_URL_SHORT} ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER} ${MACRO_VH_PROXY1_HOSTPORT} ${MACRO_VH_PROXY1_NAME} ${MACRO_VH_PROXY2_HOSTPORT} ${MACRO_VH_PROXY2_NAME}>
  <VirtualHost ${EIF_APACHE_CONF_LISTEN}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh.macro
    Use MACRO_VH  ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}" ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER}
    UndefMacro MACRO_VH
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_snippet_tomcat_cluster.macro
    Use MACRO_SNIPPET_TOMCAT_CLUSTER ${MACRO_VH_PROXY1_HOSTPORT} ${MACRO_VH_PROXY1_NAME} ${MACRO_VH_PROXY2_HOSTPORT} ${MACRO_VH_PROXY2_NAME}
    UndefMacro MACRO_SNIPPET_TOMCAT_CLUSTER
  </VirtualHost>
</Macro>

# with sso
<Macro MACRO_TOMCAT_CLUSTER_SSO ${MACRO_VH_URL_FQDN} ${MACRO_VH_URL_SHORT} ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER} ${MACRO_VH_PROXY1_HOSTPORT} ${MACRO_VH_PROXY1_NAME} ${MACRO_VH_PROXY2_HOSTPORT} ${MACRO_VH_PROXY2_NAME} ${MACRO_VH_SSO_LOCATION}>
  <VirtualHost ${EIF_APACHE_CONF_LISTEN}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh.macro
    Use MACRO_VH  ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}" ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER}
    UndefMacro MACRO_VH
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_snippet_sso_location.macro
    Use MACRO_SNIPPET_SSO_LOCATION ${MACRO_VH_SSO_LOCATION}
    UndefMacro MACRO_SNIPPET_SSO_LOCATION
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_snippet_tomcat_cluster.macro
    Use MACRO_SNIPPET_TOMCAT_CLUSTER ${MACRO_VH_PROXY1_HOSTPORT} ${MACRO_VH_PROXY1_NAME} ${MACRO_VH_PROXY2_HOSTPORT} ${MACRO_VH_PROXY2_NAME}
    UndefMacro MACRO_SNIPPET_TOMCAT_CLUSTER
  </VirtualHost>
</Macro>

# with ssl
<Macro MACRO_TOMCAT_CLUSTER_SSL ${MACRO_VH_URL_FQDN} ${MACRO_VH_URL_SHORT} ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER} ${MACRO_VH_PROXY1_HOSTPORT} ${MACRO_VH_PROXY1_NAME} ${MACRO_VH_PROXY2_HOSTPORT} ${MACRO_VH_PROXY2_NAME}>
  <VirtualHost ${EIF_APACHE_CONF_LISTEN}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_ssl_redirector.macro
    Use MACRO_VH_SSL_REDIRECTOR ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}"
    UndefMacro MACRO_VH_SSL_REDIRECTOR
  </VirtualHost>
  <VirtualHost ${EIF_APACHE_CONF_LISTENSSL}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_ssl.macro
    Use MACRO_VH_SSL ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}" ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER}
    UndefMacro MACRO_VH_SSL
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_snippet_tomcat_cluster.macro
    Use MACRO_SNIPPET_TOMCAT_CLUSTER ${MACRO_VH_PROXY1_HOSTPORT} ${MACRO_VH_PROXY1_NAME} ${MACRO_VH_PROXY2_HOSTPORT} ${MACRO_VH_PROXY2_NAME}
    UndefMacro MACRO_SNIPPET_TOMCAT_CLUSTER
  </VirtualHost>
</Macro>

<Macro MACRO_TOMCAT_CLUSTER_SSL_SSO ${MACRO_VH_URL_FQDN} ${MACRO_VH_URL_SHORT} ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER} ${MACRO_VH_PROXY1_HOSTPORT} ${MACRO_VH_PROXY1_NAME} ${MACRO_VH_PROXY2_HOSTPORT} ${MACRO_VH_PROXY2_NAME} ${MACRO_VH_SSO_LOCATION}>
  <VirtualHost ${EIF_APACHE_CONF_LISTEN}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_ssl_redirector.macro
    Use MACRO_VH_SSL_REDIRECTOR ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}"
    UndefMacro MACRO_VH_SSL_REDIRECTOR
  </VirtualHost>
  <VirtualHost ${EIF_APACHE_CONF_LISTENSSL}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_ssl.macro
    Use MACRO_VH_SSL ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}" ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER}
    UndefMacro MACRO_VH_SSL
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_snippet_sso_location.macro
    Use MACRO_SNIPPET_SSO_LOCATION ${MACRO_VH_SSO_LOCATION}
    UndefMacro MACRO_SNIPPET_SSO_LOCATION
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_snippet_tomcat_cluster.macro
    Use MACRO_SNIPPET_TOMCAT_CLUSTER ${MACRO_VH_PROXY1_HOSTPORT} ${MACRO_VH_PROXY1_NAME} ${MACRO_VH_PROXY2_HOSTPORT} ${MACRO_VH_PROXY2_NAME}
    UndefMacro MACRO_SNIPPET_TOMCAT_CLUSTER
  </VirtualHost>
</Macro>


#================================================================================#
# Generic Proxy Standalone
# only 1 backend
#================================================================================#
<Macro MACRO_PROTOPROXYPATH_STANDALONE ${MACRO_VH_URL_FQDN} ${MACRO_VH_URL_SHORT} ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER} ${MACRO_VH_PROXY1_PROTOHOSTPORT} ${MACRO_VH_PROXY_PATH}>
  <VirtualHost ${EIF_APACHE_CONF_LISTEN}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh.macro
    Use MACRO_VH  ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}" ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER}
    UndefMacro MACRO_VH
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_snippet_protoproxypath_standalone.macro
    Use MACRO_SNIPPET_PROTOPROXYPATH_STANDALONE ${MACRO_VH_PROXY1_PROTOHOSTPORT} ${MACRO_VH_PROXY_PATH}
    UndefMacro MACRO_SNIPPET_PROTOPROXYPATH_STANDALONE
  </VirtualHost>
</Macro>

# with sso
<Macro MACRO_PROTOPROXYPATH_STANDALONE_SSO ${MACRO_VH_URL_FQDN} ${MACRO_VH_URL_SHORT} ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER} ${MACRO_VH_PROXY1_PROTOHOSTPORT} ${MACRO_VH_PROXY_PATH} ${MACRO_VH_SSO_LOCATION}>
  <VirtualHost ${EIF_APACHE_CONF_LISTEN}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh.macro
    Use MACRO_VH  ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}" ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER}
    UndefMacro MACRO_VH
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_snippet_sso_location.macro
    Use MACRO_SNIPPET_SSO_LOCATION ${MACRO_VH_SSO_LOCATION}
    UndefMacro MACRO_SNIPPET_SSO_LOCATION
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_snippet_protoproxypath_standalone.macro
    Use MACRO_SNIPPET_PROTOPROXYPATH_STANDALONE ${MACRO_VH_PROXY1_PROTOHOSTPORT} ${MACRO_VH_PROXY_PATH}
    UndefMacro MACRO_SNIPPET_PROTOPROXYPATH_STANDALONE
  </VirtualHost>
</Macro>

# with ssl
<Macro MACRO_PROTOPROXYPATH_STANDALONE_SSL ${MACRO_VH_URL_FQDN} ${MACRO_VH_URL_SHORT} ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER} ${MACRO_VH_PROXY1_PROTOHOSTPORT} ${MACRO_VH_PROXY_PATH}>
  <VirtualHost ${EIF_APACHE_CONF_LISTEN}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_ssl_redirector.macro
    Use MACRO_VH_SSL_REDIRECTOR ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}"
    UndefMacro MACRO_VH_SSL_REDIRECTOR
  </VirtualHost>
  <VirtualHost ${EIF_APACHE_CONF_LISTENSSL}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_ssl.macro
    Use MACRO_VH_SSL ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}" ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER}
    UndefMacro MACRO_VH_SSL
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_snippet_protoproxypath_standalone.macro
    Use MACRO_SNIPPET_PROTOPROXYPATH_STANDALONE ${MACRO_VH_PROXY1_PROTOHOSTPORT} ${MACRO_VH_PROXY_PATH}
    UndefMacro MACRO_SNIPPET_PROTOPROXYPATH_STANDALONE
  </VirtualHost>
</Macro>

# with ssl and sso
<Macro MACRO_PROTOPROXYPATH_STANDALONE_SSL_SSO ${MACRO_VH_URL_FQDN} ${MACRO_VH_URL_SHORT} ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER} ${MACRO_VH_PROXY1_PROTOHOSTPORT} ${MACRO_VH_PROXY_PATH} ${MACRO_VH_SSO_LOCATION}>
  <VirtualHost ${EIF_APACHE_CONF_LISTEN}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_ssl_redirector.macro
    Use MACRO_VH_SSL_REDIRECTOR ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}"
    UndefMacro MACRO_VH_SSL_REDIRECTOR
  </VirtualHost>
  <VirtualHost ${EIF_APACHE_CONF_LISTENSSL}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_ssl.macro
    Use MACRO_VH_SSL ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}" ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER}
    UndefMacro MACRO_VH_SSL
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_snippet_sso_location.macro
    Use MACRO_SNIPPET_SSO_LOCATION ${MACRO_VH_SSO_LOCATION}
    UndefMacro MACRO_SNIPPET_SSO_LOCATION
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_snippet_protoproxypath_standalone.macro
    Use MACRO_SNIPPET_PROTOPROXYPATH_STANDALONE ${MACRO_VH_PROXY1_PROTOHOSTPORT} ${MACRO_VH_PROXY_PATH}
    UndefMacro MACRO_SNIPPET_PROTOPROXYPATH_STANDALONE
  </VirtualHost>
</Macro>

#================================================================================#
# Generic Proxy Cluster
# 2 backend
#================================================================================#
<Macro MACRO_PROTOPROXYPATH_CLUSTER ${MACRO_VH_URL_FQDN} ${MACRO_VH_URL_SHORT} ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER} ${MACRO_VH_PROXY1_PROTOHOSTPORT} ${MACRO_VH_PROXY2_PROTOHOSTPORT} ${MACRO_VH_PROXY_PATH}>
  <VirtualHost ${EIF_APACHE_CONF_LISTEN}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh.macro
    Use MACRO_VH  ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}" ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER}
    UndefMacro MACRO_VH
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_snippet_protoproxypath_cluster.macro
    Use MACRO_SNIPPET_PROTOPROXYPATH_CLUSTER ${MACRO_VH_PROXY1_PROTOHOSTPORT} ${MACRO_VH_PROXY2_PROTOHOSTPORT} ${MACRO_VH_PROXY_PATH}
    UndefMacro MACRO_SNIPPET_PROTOPROXYPATH_CLUSTER
  </VirtualHost>
</Macro>

# with sso
<Macro MACRO_PROTOPROXYPATH_CLUSTER_SSO ${MACRO_VH_URL_FQDN} ${MACRO_VH_URL_SHORT} ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER} ${MACRO_VH_PROXY1_PROTOHOSTPORT} ${MACRO_VH_PROXY2_PROTOHOSTPORT} ${MACRO_VH_PROXY_PATH} ${MACRO_VH_SSO_LOCATION}>
  <VirtualHost ${EIF_APACHE_CONF_LISTEN}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh.macro
    Use MACRO_VH  ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}" ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER}
    UndefMacro MACRO_VH
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_snippet_sso_location.macro
    Use MACRO_SNIPPET_SSO_LOCATION ${MACRO_VH_SSO_LOCATION}
    UndefMacro MACRO_SNIPPET_SSO_LOCATION
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_snippet_protoproxypath_cluster.macro
    Use MACRO_SNIPPET_PROTOPROXYPATH_CLUSTER ${MACRO_VH_PROXY1_PROTOHOSTPORT} ${MACRO_VH_PROXY2_PROTOHOSTPORT} ${MACRO_VH_PROXY_PATH}
    UndefMacro MACRO_SNIPPET_PROTOPROXYPATH_CLUSTER
  </VirtualHost>
</Macro>

# with ssl
<Macro MACRO_PROTOPROXYPATH_CLUSTER_SSL ${MACRO_VH_URL_FQDN} ${MACRO_VH_URL_SHORT} ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER} ${MACRO_VH_PROXY1_PROTOHOSTPORT} ${MACRO_VH_PROXY2_PROTOHOSTPORT} ${MACRO_VH_PROXY_PATH}>
  <VirtualHost ${EIF_APACHE_CONF_LISTEN}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_ssl_redirector.macro
    Use MACRO_VH_SSL_REDIRECTOR ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}"
    UndefMacro MACRO_VH_SSL_REDIRECTOR
  </VirtualHost>
  <VirtualHost ${EIF_APACHE_CONF_LISTENSSL}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh.macro
    Use MACRO_VH  ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}" ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER}
    UndefMacro MACRO_VH
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_snippet_protoproxypath_cluster.macro
    Use MACRO_SNIPPET_PROTOPROXYPATH_CLUSTER ${MACRO_VH_PROXY1_PROTOHOSTPORT} ${MACRO_VH_PROXY2_PROTOHOSTPORT} ${MACRO_VH_PROXY_PATH}
    UndefMacro MACRO_SNIPPET_PROTOPROXYPATH_CLUSTER
  </VirtualHost>
</Macro>

# with ssl and sso
<Macro MACRO_PROTOPROXYPATH_CLUSTER_SSL_SSO ${MACRO_VH_URL_FQDN} ${MACRO_VH_URL_SHORT} ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER} ${MACRO_VH_PROXY1_PROTOHOSTPORT} ${MACRO_VH_PROXY2_PROTOHOSTPORT} ${MACRO_VH_PROXY_PATH} ${MACRO_VH_SSO_LOCATION}>
  <VirtualHost ${EIF_APACHE_CONF_LISTEN}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_ssl_redirector.macro
    Use MACRO_VH_SSL_REDIRECTOR ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}"
    UndefMacro MACRO_VH_SSL_REDIRECTOR
  </VirtualHost>
  <VirtualHost ${EIF_APACHE_CONF_LISTENSSL}>
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_ssl.macro
    Use MACRO_VH_SSL ${MACRO_VH_URL_FQDN} "${MACRO_VH_URL_SHORT}" ${MACRO_VH_DOCROOT} ${MACRO_VH_WEBMASTER}
    UndefMacro MACRO_VH_SSL
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_snippet_sso_location.macro
    Use MACRO_SNIPPET_SSO_LOCATION ${MACRO_VH_SSO_LOCATION}
    UndefMacro MACRO_SNIPPET_SSO_LOCATION
    Include ${EIF_APACHE_CONFDIR}/macro.d/vh_snippet_protoproxypath_cluster.macro
    Use MACRO_SNIPPET_PROTOPROXYPATH_CLUSTER ${MACRO_VH_PROXY1_PROTOHOSTPORT} ${MACRO_VH_PROXY2_PROTOHOSTPORT} ${MACRO_VH_PROXY_PATH}
    UndefMacro MACRO_SNIPPET_PROTOPROXYPATH_CLUSTER
  </VirtualHost>
</Macro>

